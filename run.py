import argparse, frida

def argments_parser():
    parser = argparse.ArgumentParser(description="Process some integers.")
    parser.add_argument("-p", "--process-id", type=int, help="Process ID (integer)")
    parser.add_argument("--load", type=str, help="File to load")
    args = parser.parse_args()
    return args

def main(pid, jsfile):
    device = frida.get_local_device()
    info = device.query_system_parameters()
    print(info)
    all_processes = device.enumerate_processes()
    print(all_processes)
    with open(jsfile, 'r') as file:
        jscode = file.read().strip()
    
    process = device.attach(pid)
    script = process.create_script(jscode)
    script.load()

if __name__ == "__main__":
    args = argments_parser()
    if args.process_id is not None and args.load is not None:
        print("[+]Process ID: ", args.process_id)
        print("[+]File to load: ", args.load)
        main(args.process_id, args.load)
    
    else:
        print("[-]Usage: python run.py -p <PID> --load <JS FILE PATH>")